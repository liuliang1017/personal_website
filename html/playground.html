<!doctype html>
<html>
<head>
    <title>Liang Liu</title>

    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Liang Liu Homepage"/>
    <meta name="keyword" content="Liang Liu UM AE CS Web developer">
    <link href = "../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/jquery-ui.theme.css" rel="stylesheet">
    <link href="../css/lightslider.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
    <link rel="icon" href="../img/icon.jpeg">

    <style type="text/css">
    body{
        padding-top: 50px;
        padding-bottom: 20px;
    }

    .droppable { width: 170px; height: 170px; padding: 0.1em; float: left; margin: 1px; }
    .draggable { z-index: 1; position: absolute;}
    
    #board{
      margin-top: 30px;
      padding-left: 10px;
      width: 100%;
      height: 650px;
    }

    .puzzle_img{
      height: 100%;
      width: 100%;
    }

    .game_btn{
      float: left;
      margin-left: 20px;
    }

    #time_sign{
      margin-top: 10px;
      margin-left: 20px;
      padding-left: 20px;
      float: left;
    }

    #my_selector{
      margin-top: 20px;
      margin-bottom: 10px;
    }

    #submit_btn{
      margin-top: 20px;
      margin-bottom: 10px;
      width: 120%;
    }
    </style>

    <script type="text/javascript" src="../javascript/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
    <script type="text/javascript" src = "../javascript/bootstrap.min.js"></script>
    <script type="text/javascript" src="../javascript/lightslider.js"></script>
    <script type="text/javascript" src="../javascript/my_lightslider.js"></script>
    


</head>

<body>
    <nav class ="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class = "navbar-header">
                <a href="../index.html" class="navbar-brand"><span class="glyphicon glyphicon-home"></span></a>
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target = "#navbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <div id="navbar" class="collapse navbar-collapse">
                <ul class = "nav navbar-nav">
                    <li><a href="about_me.html">About Me</a></li>
                    <li class = "active"><a href="web_game.html">Web Game Demo</a></li>
                    <li><a href="project.html">Project Exhibition</a></li>
                    <li><a href="chat.php">Chat Room</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class = "jumbotron">
      <div class = "row">
        <div class="col-md-6">
        <button type="button" class="btn btn-success btn-lg center-block game_btn" id = "start_btn" data-toggle="modal" data-target="#myModal">
          Start
        </button>
        <button type="button" class="btn btn-warning btn-lg center-block game_btn" id = "reset_btn" data-toggle="modal" data-target="#myModal">
          Reset/Replay
        </button>
        <h3 id = "time_sign"><span class="glyphicon glyphicon-time" ></span>Time Elapse: <span id = 'digit'>0</span>s</h3>
        <img id = "board" class = "col-md-12" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num1" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num2" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num3" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num4" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num5" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num6" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num7" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num8" src = "">
            <img class = "puzzle_img ui-widget-content draggable" id= "num9" src = "">
        </div>
        <div class="col-md-6">
          <div class = "col-md-12">
            <div class = "col-md-2"></div>
            <img src = "../img/game_logo.png" class = "col-md-6"/>
            <div class = "col-md-4"></div>
          </div>
          <div class="ui-widget-header col-md-4 droppable" id = "house1">
          <p>1</p>
          </div>
          <div class="ui-widget-header col-md-4 droppable" id = "house2">
          <p>2</p>
          </div>  
          <div class="ui-widget-header col-md-4 droppable" id = "house3">
          <p>3</p>
          </div>
          <div class="ui-widget-header col-md-4 droppable" id = "house4">
          <p>4</p>
          </div>
          <div class="ui-widget-header col-md-4 droppable" id = "house5">
          <p>5</p>
          </div>  
          <div class="ui-widget-header col-md-4 droppable" id = "house6">
          <p>6</p>
          </div>  
          <div class="ui-widget-header col-md-4 droppable" id = "house7">
          <p>7</p>
          </div>
          <div class="ui-widget-header col-md-4 droppable" id = "house8">
          <p>8</p>
          </div>  
          <div class="ui-widget-header col-md-4 droppable" id = "house9">
          <p>9</p>
          </div>  
          <div class = "col-md-1"> </div>
          <div class = "col-md-6" id = "my_selector">
              <select class="form-control" id = "opt">
              <option value = "invalid">Who am I?</option>
              <option value = "Charmelon">Charmeleon</option>
              <option value = "Squirtle">Squirtle</option>
              <option value = "Gengar">Gengar</option>
              <option value = "Eevee">Eevee</option>
              <option value = "Pichu">Pichu</option>
            </select>
           </div>
          <div class = "col-md-4">
            <button type="button" class="btn btn-primary center-block" id = "submit_btn" data-toggle="modal" data-target="#myModal">
              Finish!
            </button>
          </div>
          <div class = "col-md-1"> </div>
          <div class = "col-md-1"> </div>
          <div class = "col-md-10">
            <p class="bg-success">Congratulation! You got the correct answer!</p>
            <p class="bg-danger">Wrong Answer T_T Try again ^_^ </p>
          </div>
          <div class = "col-md-1"> </div>
        </div>
      </div>
    </div>


    <div class = "container">
        <footer>
            <p>&copy; 2016 Liang Liu</p>
        </footer>
    </div>



  <script type="text/javascript">

  var img_header = "p0_";
  var board_header = "board0.png";
  var progress = 0;
  var createdTime;
  var currentTime;
  var timeUse;
  var my_clock;
  var answer;
  function random_initializer(){
    var img_index = '12345'.split('');
    var choice = Math.floor(Math.random() * 5);
    var answer_candidate = ["Squirtle", "Charmeleon", "Eevee", "Gengar", "Pichu"];
    answer = answer_candidate[choice];
    img_header = "p" + img_index[choice] + "_";
    var board_candidates = ["board1.png", "board2.jpeg"];
    board_header = "../img/" + board_candidates[Math.floor(Math.random() * 2)];
  }


 

      $( function() {
        $( ".draggable" ).draggable();
        for(var i = 1; i < 10; ++i){
          var house_name = "#house" + i;
          var num = "#num" + i;
          $(house_name).droppable({
            accept: num,
            classes: {
              "ui-droppable-active": "ui-state-active",
              "ui-droppable-hover": "ui-state-hover"
            },
            drop: function( event, ui ) {
              $( this ).addClass( "ui-state-highlight" );
              $(ui.draggable).css({ width: "170px" });
              $(ui.draggable).css({ height: "170px" });
              $(ui.draggable).offset($(this).offset());
              $(ui.draggable).draggable('disable');
              progress += 1;
              if(progress == 9) select_answer();
            }
          });
        }
      } );


    function make_puzzle() {
        for(var i = 1; i < 10; ++i){
          var size_in = Math.random()*60;
          if(size_in < 20) size_in = 20;
          var left_in = Math.random()*450 + 20;
          var top_in = Math.random()*500 + 80;
          var name = "#num" + i;
          $(name).attr('src', '../img/' + img_header + i + ".png");
          $("#board").attr('src', board_header);
          $(name).css({ top: top_in + "px" });
          $(name).css({ left: left_in + "px" });
          $(name).css({ width: size_in + "px" });
          $(name).css({ height: size_in + "px" });
          $(name).draggable({disabled: true});
        }
        $('.bg-success').css("display","none");
        $('.bg-danger').css("display","none");
    }

    function select_answer(){
      $("#submit_btn").click(function(){
        if($("#opt").val() == answer){
          timeUse = Date.now() - createdTime;
          var time_in_s = timeUse/1000;
          $('#digit').html(time_in_s);
          $('#time_sign').css({ 'color': 'red'});
          clearInterval(my_clock);
          $('.bg-success').css("display","block");
          $('.bg-danger').css("display","none");
        }
        else{
          $('.bg-success').css("display","none");
          $('.bg-danger').css("display","block");
        }
      });
    }

    random_initializer();
    make_puzzle();
    

  $( "#start_btn" ).click(function() {
    for(var i = 1; i < 10; ++i){
    var name = "#num" + i;
      $(name).draggable({ disabled: false });
    }
    createdTime = Date.now();
    my_clock = setInterval(function () {
      timeUse = Date.now() - createdTime;
      var time_in_s = timeUse/1000;
      $('#digit').html(time_in_s);
    },1000);
  });

  $( "#reset_btn" ).click(function() {
    window.location.reload();
  });



  </script>
</body>